name: SYNC TO GITEE
on:
  push:
  schedule:
    - cron: '45 5 * * *'

jobs:
  sync:
      runs-on: ubuntu-latest
      steps:
        - name: Cache src repos
          uses: actions/cache@v4
          id: cache
          with:
              path: ${{ github.workspace }}/hub-mirror-cache
              key: ${{ runner.os }}-${{ steps.info.outputs.key }}-cache-${{ steps.info.outputs.time }}
              restore-keys: ${{ runner.os }}-${{ steps.info.outputs.key }}-cache-

        - name: Mirror to gitee
          uses: Yikun/hub-mirror-action@master
          with:
              src: github/kk77mgj
              dst: gitee/zjwzcntzy
              dst_key: ${{ secrets.SSH_PRIVATE_TOKEN }}
              dst_token: ${{ secrets.GITEE_TOKEN }}
              account_type: user
              static_list: "Jellyfin-Plugins-NJU-Mirror"
              cache_path: /github/workspace/hub-mirror-cache
              force_update: true